<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Ëñ¨„Éû„Éç</title>

<link rel="manifest" href="manifest.json">

<!-- iOSÁî® -->
<link rel="apple-touch-icon" href="icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Ëñ¨„Éû„Éç">

<!-- Ëâ≤ -->
<meta name="theme-color" content="#ff8fb1">

<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">

<style>
body {
 font-family: 'Zen Maru Gothic', sans-serif;
 background: #fff5f7;
 margin:0;
 padding:20px;
 text-align:center;
 color:#555;
}

.container{
 max-width:400px;
 margin:auto;
}

h1{
 color:#ff8fb1;
}

.card{
 background:white;
 padding:12px;
 margin:10px;
 border-radius:16px;
}

button{
 width:100%;
 padding:16px;
 font-size:18px;
 border:none;
 border-radius:12px;
 background:#ff8fb1;
 color:white;
}

.done{
 background:#ccc;
}

.sub{
 background:#ffb7c5;
 margin-top:20px;
}
</style>

</head>
<body>

<div class="container">

<h1>üå∏ Ëñ¨„Éû„Éç üå∏</h1>

<div id="status"></div>

<div id="list"></div>

<button class="sub" onclick="showHistory()">Â±•Ê≠¥</button>

<div id="history" style="display:none"></div>

<button class="sub" onclick="showMain()" id="back" style="display:none">Êàª„Çã</button>

</div>

<script>

const MEDICINES=["„Ç≥„É≥„Çµ1","„Ç≥„É≥„Çµ2","ÊäëËÇùÊï£","È†ìÊúç"];

function getLogs(){
 return JSON.parse(localStorage.getItem("logs")||"[]");
}

function save(name){

 const now=new Date();

 const log={
 name,
 time:now.toLocaleString(),
 ts:now.getTime()
 };

 const logs=getLogs();

 logs.push(log);

 localStorage.setItem("logs",JSON.stringify(logs));

 render();
}

function render(){

 const logs=getLogs();

 const today=new Date().toLocaleDateString();

 const taken=logs
 .filter(l=>new Date(l.ts).toLocaleDateString()==today)
 .map(l=>l.name);

 const list=document.getElementById("list");

 list.innerHTML="";

 MEDICINES.forEach(m=>{

 const btn=document.createElement("button");

 btn.innerText=m;

 if(taken.includes(m)){
 btn.className="done";
 }

 btn.onclick=()=>save(m);

 const card=document.createElement("div");

 card.className="card";

 card.appendChild(btn);

 list.appendChild(card);

 });

}

function showHistory(){

 document.getElementById("list").style.display="none";

 document.getElementById("history").style.display="block";

 document.getElementById("back").style.display="block";

 const logs=getLogs().reverse();

 const div=document.getElementById("history");

 div.innerHTML="";

 logs.forEach(l=>{

 const d=document.createElement("div");

 d.className="card";

 d.innerText=l.time+" "+l.name;

 div.appendChild(d);

 });

}

function showMain(){

 document.getElementById("list").style.display="block";

 document.getElementById("history").style.display="none";

 document.getElementById("back").style.display="none";

}

render();

</script>

</body>
</html>
